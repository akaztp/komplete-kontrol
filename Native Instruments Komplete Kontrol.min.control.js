!function(n,t){var e,r;"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("underscore",t):(n="undefined"!=typeof globalThis?globalThis:n||self,e=n._,(r=n._=t()).noConflict=function(){return n._=e,r})}(this,function(){var n="1.13.1",t="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},r=Array.prototype,u=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,i=r.push,c=r.slice,h=u.toString,e=u.hasOwnProperty,o="undefined"!=typeof ArrayBuffer,a="undefined"!=typeof DataView,l=Array.isArray,f=Object.keys,p=Object.create,d=o&&ArrayBuffer.isView,v=isNaN,g=isFinite,m=!{toString:null}.propertyIsEnumerable("toString"),y=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],b=Math.pow(2,53)-1;function K(i,o){return o=null==o?i.length-1:+o,function(){for(var n=Math.max(arguments.length-o,0),t=Array(n),e=0;e<n;e++)t[e]=arguments[e+o];switch(o){case 0:return i.call(this,t);case 1:return i.call(this,arguments[0],t);case 2:return i.call(this,arguments[0],arguments[1],t)}for(var r=Array(o+1),e=0;e<o;e++)r[e]=arguments[e];return r[o]=t,i.apply(this,r)}}function M(n){var t=typeof n;return"function"==t||"object"==t&&!!n}function O(n){return void 0===n}function w(n){return!0===n||!1===n||"[object Boolean]"===h.call(n)}function _(n){var t="[object "+n+"]";return function(n){return h.call(n)===t}}var j=_("String"),A=_("Number"),E=_("Date"),x=_("RegExp"),P=_("Error"),S=_("Symbol"),N=_("ArrayBuffer"),C=_("Function"),T=t.document&&t.document.childNodes,D=C="function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof T?function(n){return"function"==typeof n||!1}:C,I=_("Object"),k=a&&I(new DataView(new ArrayBuffer(8))),B="undefined"!=typeof Map&&I(new Map),F=_("DataView");var L=k?function(n){return null!=n&&D(n.getInt8)&&N(n.buffer)}:F,R=l||_("Array");function W(n,t){return null!=n&&e.call(n,t)}var z=_("Arguments");!function(){z(arguments)||(z=function(n){return W(n,"callee")})}();var V=z;function U(n){return A(n)&&v(n)}function q(n){return function(){return n}}function $(t){return function(n){n=t(n);return"number"==typeof n&&0<=n&&n<=b}}function J(t){return function(n){return null==n?void 0:n[t]}}var G=J("byteLength"),H=$(G),Q=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var X=o?function(n){return d?d(n)&&!L(n):H(n)&&Q.test(h.call(n))}:q(!1),Y=J("length");function Z(n,t){t=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(n){return e[n]},push:function(n){return e[n]=!0,t.push(n)}}}(t);var e=y.length,r=n.constructor,i=D(r)&&r.prototype||u,o="constructor";for(W(n,o)&&!t.contains(o)&&t.push(o);e--;)(o=y[e])in n&&n[o]!==i[o]&&!t.contains(o)&&t.push(o)}function nn(n){if(!M(n))return[];if(f)return f(n);var t,e=[];for(t in n)W(n,t)&&e.push(t);return m&&Z(n,e),e}function tn(n,t){var e=nn(t),r=e.length;if(null==n)return!r;for(var i=Object(n),o=0;o<r;o++){var u=e[o];if(t[u]!==i[u]||!(u in i))return!1}return!0}function en(n){return n instanceof en?n:this instanceof en?void(this._wrapped=n):new en(n)}function rn(n){return new Uint8Array(n.buffer||n,n.byteOffset||0,G(n))}en.VERSION=n,en.prototype.valueOf=en.prototype.toJSON=en.prototype.value=function(){return this._wrapped},en.prototype.toString=function(){return String(this._wrapped)};var on="[object DataView]";function un(n,t,e,r){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return!1;if(n!=n)return t!=t;var i=typeof n;return("function"==i||"object"==i||"object"==typeof t)&&function n(t,e,r,i){t instanceof en&&(t=t._wrapped);e instanceof en&&(e=e._wrapped);var o=h.call(t);if(o!==h.call(e))return!1;if(k&&"[object Object]"==o&&L(t)){if(!L(e))return!1;o=on}switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return s.valueOf.call(t)===s.valueOf.call(e);case"[object ArrayBuffer]":case on:return n(rn(t),rn(e),r,i)}var u="[object Array]"===o;if(!u&&X(t)){var a=G(t);if(a!==G(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;u=!0}if(!u){if("object"!=typeof t||"object"!=typeof e)return!1;o=t.constructor,a=e.constructor;if(o!==a&&!(D(o)&&o instanceof o&&D(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];i=i||[];var c=r.length;for(;c--;)if(r[c]===t)return i[c]===e;r.push(t);i.push(e);if(u){if((c=t.length)!==e.length)return!1;for(;c--;)if(!un(t[c],e[c],r,i))return!1}else{var l,f=nn(t);if(c=f.length,nn(e).length!==c)return!1;for(;c--;)if(l=f[c],!W(e,l)||!un(t[l],e[l],r,i))return!1}r.pop();i.pop();return!0}(n,t,e,r)}function an(n){if(!M(n))return[];var t,e=[];for(t in n)e.push(t);return m&&Z(n,e),e}function cn(r){var i=Y(r);return function(n){if(null==n)return!1;var t=an(n);if(Y(t))return!1;for(var e=0;e<i;e++)if(!D(n[r[e]]))return!1;return r!==pn||!D(n[ln])}}var ln="forEach",fn=["clear","delete"],sn=["get","has","set"],hn=fn.concat(ln,sn),pn=fn.concat(sn),dn=["add"].concat(fn,ln,"has"),vn=B?cn(hn):_("Map"),gn=B?cn(pn):_("WeakMap"),mn=B?cn(dn):_("Set"),yn=_("WeakSet");function bn(n){for(var t=nn(n),e=t.length,r=Array(e),i=0;i<e;i++)r[i]=n[t[i]];return r}function Kn(n){for(var t={},e=nn(n),r=0,i=e.length;r<i;r++)t[n[e[r]]]=e[r];return t}function Mn(n){var t,e=[];for(t in n)D(n[t])&&e.push(t);return e.sort()}function On(c,l){return function(n){var t=arguments.length;if(l&&(n=Object(n)),t<2||null==n)return n;for(var e=1;e<t;e++)for(var r=arguments[e],i=c(r),o=i.length,u=0;u<o;u++){var a=i[u];l&&void 0!==n[a]||(n[a]=r[a])}return n}}var wn=On(an),_n=On(nn),jn=On(an,!0);function An(n){if(!M(n))return{};if(p)return p(n);var t=function(){};t.prototype=n;n=new t;return t.prototype=null,n}function En(n){return M(n)?R(n)?n.slice():wn({},n):n}function xn(n){return R(n)?n:[n]}function Pn(n){return en.toPath(n)}function Sn(n,t){for(var e=t.length,r=0;r<e;r++){if(null==n)return;n=n[t[r]]}return e?n:void 0}function Nn(n,t,e){t=Sn(n,Pn(t));return O(t)?e:t}function Cn(n){return n}function Tn(t){return t=_n({},t),function(n){return tn(n,t)}}function Dn(t){return t=Pn(t),function(n){return Sn(n,t)}}function In(i,o,n){if(void 0===o)return i;switch(null==n?3:n){case 1:return function(n){return i.call(o,n)};case 3:return function(n,t,e){return i.call(o,n,t,e)};case 4:return function(n,t,e,r){return i.call(o,n,t,e,r)}}return function(){return i.apply(o,arguments)}}function kn(n,t,e){return null==n?Cn:D(n)?In(n,t,e):(M(n)&&!R(n)?Tn:Dn)(n)}function Bn(n,t){return kn(n,t,1/0)}function Fn(n,t,e){return en.iteratee!==Bn?en.iteratee(n,t):kn(n,t,e)}function Ln(){}function Rn(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))}en.toPath=xn,en.iteratee=Bn;var Wn=Date.now||function(){return(new Date).getTime()};function zn(t){function e(n){return t[n]}var n="(?:"+nn(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(n){return r.test(n=null==n?"":""+n)?n.replace(i,e):n}}var Vn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Un=zn(Vn),qn=zn(Kn(Vn)),$n=en.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Jn=/(.)^/,Gn={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Hn=/\\|'|\r|\n|\u2028|\u2029/g;function Qn(n){return"\\"+Gn[n]}var Xn=/^\s*(\w|\$)+\s*$/;var Yn=0;function Zn(n,t,e,r,i){if(!(r instanceof t))return n.apply(e,i);e=An(n.prototype),i=n.apply(e,i);return M(i)?i:e}var nt=K(function(i,o){function u(){for(var n=0,t=o.length,e=Array(t),r=0;r<t;r++)e[r]=o[r]===a?arguments[n++]:o[r];for(;n<arguments.length;)e.push(arguments[n++]);return Zn(i,u,this,this,e)}var a=nt.placeholder;return u});nt.placeholder=en;var tt=K(function(t,e,r){if(!D(t))throw new TypeError("Bind must be called on a function");var i=K(function(n){return Zn(t,i,e,this,r.concat(n))});return i}),et=$(Y);function rt(n,t,e,r){if(r=r||[],t||0===t){if(t<=0)return r.concat(n)}else t=1/0;for(var i=r.length,o=0,u=Y(n);o<u;o++){var a=n[o];if(et(a)&&(R(a)||V(a)))if(1<t)rt(a,t-1,e,r),i=r.length;else for(var c=0,l=a.length;c<l;)r[i++]=a[c++];else e||(r[i++]=a)}return r}var it=K(function(n,t){var e=(t=rt(t,!1,!1)).length;if(e<1)throw new Error("bindAll must be passed function names");for(;e--;){var r=t[e];n[r]=tt(n[r],n)}return n});var ot=K(function(n,t,e){return setTimeout(function(){return n.apply(null,e)},t)}),ut=nt(ot,en,1);function at(n){return function(){return!n.apply(this,arguments)}}function ct(n,t){var e;return function(){return 0<--n&&(e=t.apply(this,arguments)),n<=1&&(t=null),e}}t=nt(ct,2);function lt(n,t,e){t=Fn(t,e);for(var r,i=nn(n),o=0,u=i.length;o<u;o++)if(t(n[r=i[o]],r,n))return r}function ft(o){return function(n,t,e){t=Fn(t,e);for(var r=Y(n),i=0<o?0:r-1;0<=i&&i<r;i+=o)if(t(n[i],i,n))return i;return-1}}var st=ft(1),T=ft(-1);function ht(n,t,e,r){for(var i=(e=Fn(e,r,1))(t),o=0,u=Y(n);o<u;){var a=Math.floor((o+u)/2);e(n[a])<i?o=a+1:u=a}return o}function pt(o,u,a){return function(n,t,e){var r=0,i=Y(n);if("number"==typeof e)0<o?r=0<=e?e:Math.max(e+i,r):i=0<=e?Math.min(e+1,i):e+i+1;else if(a&&e&&i)return n[e=a(n,t)]===t?e:-1;if(t!=t)return 0<=(e=u(c.call(n,r,i),U))?e+r:-1;for(e=0<o?r:i-1;0<=e&&e<i;e+=o)if(n[e]===t)return e;return-1}}var dt=pt(1,st,ht),C=pt(-1,T);function vt(n,t,e){e=(et(n)?st:lt)(n,t,e);if(void 0!==e&&-1!==e)return n[e]}function gt(n,t,e){if(t=In(t,e),et(n))for(i=0,o=n.length;i<o;i++)t(n[i],i,n);else for(var r=nn(n),i=0,o=r.length;i<o;i++)t(n[r[i]],r[i],n);return n}function mt(n,t,e){t=Fn(t,e);for(var r=!et(n)&&nn(n),i=(r||n).length,o=Array(i),u=0;u<i;u++){var a=r?r[u]:u;o[u]=t(n[a],a,n)}return o}function yt(c){return function(n,t,e,r){var i=3<=arguments.length;return function(n,t,e,r){var i=!et(n)&&nn(n),o=(i||n).length,u=0<c?0:o-1;for(r||(e=n[i?i[u]:u],u+=c);0<=u&&u<o;u+=c){var a=i?i[u]:u;e=t(e,n[a],a,n)}return e}(n,In(t,r,4),e,i)}}a=yt(1),I=yt(-1);function bt(n,r,t){var i=[];return r=Fn(r,t),gt(n,function(n,t,e){r(n,t,e)&&i.push(n)}),i}function Kt(n,t,e){t=Fn(t,e);for(var r=!et(n)&&nn(n),i=(r||n).length,o=0;o<i;o++){var u=r?r[o]:o;if(!t(n[u],u,n))return!1}return!0}function Mt(n,t,e){t=Fn(t,e);for(var r=!et(n)&&nn(n),i=(r||n).length,o=0;o<i;o++){var u=r?r[o]:o;if(t(n[u],u,n))return!0}return!1}function Ot(n,t,e,r){return et(n)||(n=bn(n)),0<=dt(n,t,e="number"!=typeof e||r?0:e)}F=K(function(n,e,r){var i,o;return D(e)?o=e:(e=Pn(e),i=e.slice(0,-1),e=e[e.length-1]),mt(n,function(n){var t=o;if(!t){if(null==(n=i&&i.length?Sn(n,i):n))return;t=n[e]}return null==t?t:t.apply(n,r)})});function wt(n,t){return mt(n,Dn(t))}function _t(n,r,t){var e,i,o=-1/0,u=-1/0;if(null==r||"number"==typeof r&&"object"!=typeof n[0]&&null!=n)for(var a=0,c=(n=et(n)?n:bn(n)).length;a<c;a++)null!=(e=n[a])&&o<e&&(o=e);else r=Fn(r,t),gt(n,function(n,t,e){i=r(n,t,e),(u<i||i===-1/0&&o===-1/0)&&(o=n,u=i)});return o}function jt(n,t,e){if(null==t||e)return(n=!et(n)?bn(n):n)[Rn(n.length-1)];var r=(et(n)?En:bn)(n),n=Y(r);t=Math.max(Math.min(t,n),0);for(var i=n-1,o=0;o<t;o++){var u=Rn(o,i),a=r[o];r[o]=r[u],r[u]=a}return r.slice(0,t)}function At(o,t){return function(e,r,n){var i=t?[[],[]]:{};return r=Fn(r,n),gt(e,function(n,t){t=r(n,t,e);o(i,n,t)}),i}}var l=At(function(n,t,e){W(n,e)?n[e].push(t):n[e]=[t]}),o=At(function(n,t,e){n[e]=t}),sn=At(function(n,t,e){W(n,e)?n[e]++:n[e]=1}),fn=At(function(n,t,e){n[e?0:1].push(t)},!0),Et=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function xt(n,t,e){return t in e}var Pt=K(function(n,t){var e={},r=t[0];if(null==n)return e;D(r)?(1<t.length&&(r=In(r,t[1])),t=an(n)):(r=xt,t=rt(t,!1,!1),n=Object(n));for(var i=0,o=t.length;i<o;i++){var u=t[i],a=n[u];r(a,u,n)&&(e[u]=a)}return e}),hn=K(function(n,e){var t,r=e[0];return D(r)?(r=at(r),1<e.length&&(t=e[1])):(e=mt(rt(e,!1,!1),String),r=function(n,t){return!Ot(e,t)}),Pt(n,r,t)});function St(n,t,e){return c.call(n,0,Math.max(0,n.length-(null==t||e?1:t)))}function Nt(n,t,e){return null==n||n.length<1?null==t||e?void 0:[]:null==t||e?n[0]:St(n,n.length-t)}function Ct(n,t,e){return c.call(n,null==t||e?1:t)}var Tt=K(function(n,t){return t=rt(t,!0,!0),bt(n,function(n){return!Ot(t,n)})}),B=K(function(n,t){return Tt(n,t)});function Dt(n,t,e,r){w(t)||(r=e,e=t,t=!1),null!=e&&(e=Fn(e,r));for(var i=[],o=[],u=0,a=Y(n);u<a;u++){var c=n[u],l=e?e(c,u,n):c;t&&!e?(u&&o===l||i.push(c),o=l):e?Ot(o,l)||(o.push(l),i.push(c)):Ot(i,c)||i.push(c)}return i}dn=K(function(n){return Dt(rt(n,!0,!0))});function It(n){for(var t=n&&_t(n,Y).length||0,e=Array(t),r=0;r<t;r++)e[r]=wt(n,r);return e}Vn=K(It);function kt(n,t){return n._chain?en(t).chain():t}function Bt(e){return gt(Mn(e),function(n){var t=en[n]=e[n];en.prototype[n]=function(){var n=[this._wrapped];return i.apply(n,arguments),kt(this,t.apply(en,n))}}),en}gt(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];en.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0]),kt(this,n)}}),gt(["concat","join","slice"],function(n){var t=r[n];en.prototype[n]=function(){var n=this._wrapped;return kt(this,n=null!=n?t.apply(n,arguments):n)}});Vn=Bt({__proto__:null,VERSION:n,restArguments:K,isObject:M,isNull:function(n){return null===n},isUndefined:O,isBoolean:w,isElement:function(n){return!(!n||1!==n.nodeType)},isString:j,isNumber:A,isDate:E,isRegExp:x,isError:P,isSymbol:S,isArrayBuffer:N,isDataView:L,isArray:R,isFunction:D,isArguments:V,isFinite:function(n){return!S(n)&&g(n)&&!isNaN(parseFloat(n))},isNaN:U,isTypedArray:X,isEmpty:function(n){if(null==n)return!0;var t=Y(n);return"number"==typeof t&&(R(n)||j(n)||V(n))?0===t:0===Y(nn(n))},isMatch:tn,isEqual:function(n,t){return un(n,t)},isMap:vn,isWeakMap:gn,isSet:mn,isWeakSet:yn,keys:nn,allKeys:an,values:bn,pairs:function(n){for(var t=nn(n),e=t.length,r=Array(e),i=0;i<e;i++)r[i]=[t[i],n[t[i]]];return r},invert:Kn,functions:Mn,methods:Mn,extend:wn,extendOwn:_n,assign:_n,defaults:jn,create:function(n,t){return n=An(n),t&&_n(n,t),n},clone:En,tap:function(n,t){return t(n),n},get:Nn,has:function(n,t){for(var e=(t=Pn(t)).length,r=0;r<e;r++){var i=t[r];if(!W(n,i))return!1;n=n[i]}return!!e},mapObject:function(n,t,e){t=Fn(t,e);for(var r=nn(n),i=r.length,o={},u=0;u<i;u++){var a=r[u];o[a]=t(n[a],a,n)}return o},identity:Cn,constant:q,noop:Ln,toPath:xn,property:Dn,propertyOf:function(t){return null==t?Ln:function(n){return Nn(t,n)}},matcher:Tn,matches:Tn,times:function(n,t,e){var r=Array(Math.max(0,n));t=In(t,e,1);for(var i=0;i<n;i++)r[i]=t(i);return r},random:Rn,now:Wn,escape:Un,unescape:qn,templateSettings:$n,template:function(o,n,t){n=jn({},n=!n&&t?t:n,en.templateSettings);var e,t=RegExp([(n.escape||Jn).source,(n.interpolate||Jn).source,(n.evaluate||Jn).source].join("|")+"|$","g"),u=0,a="__p+='";if(o.replace(t,function(n,t,e,r,i){return a+=o.slice(u,i).replace(Hn,Qn),u=i+n.length,t?a+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":e?a+="'+\n((__t=("+e+"))==null?'':__t)+\n'":r&&(a+="';\n"+r+"\n__p+='"),n}),a+="';\n",t=n.variable){if(!Xn.test(t))throw new Error("variable is not a bare identifier: "+t)}else a="with(obj||{}){\n"+a+"}\n",t="obj";a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(t,"_",a)}catch(n){throw n.source=a,n}return(n=function(n){return e.call(this,n,en)}).source="function("+t+"){\n"+a+"}",n},result:function(n,t,e){var r=(t=Pn(t)).length;if(!r)return D(e)?e.call(n):e;for(var i=0;i<r;i++){var o=null==n?void 0:n[t[i]];void 0===o&&(o=e,i=r),n=D(o)?o.call(n):o}return n},uniqueId:function(n){var t=++Yn+"";return n?n+t:t},chain:function(n){return(n=en(n))._chain=!0,n},iteratee:Bn,partial:nt,bind:tt,bindAll:it,memoize:function(r,i){function o(n){var t=o.cache,e=""+(i?i.apply(this,arguments):n);return W(t,e)||(t[e]=r.apply(this,arguments)),t[e]}return o.cache={},o},delay:ot,defer:ut,throttle:function(e,r,i){var o,u,a,c,l=0;function f(){l=!1===i.leading?0:Wn(),o=null,c=e.apply(u,a),o||(u=a=null)}function n(){var n=Wn();l||!1!==i.leading||(l=n);var t=r-(n-l);return u=this,a=arguments,t<=0||r<t?(o&&(clearTimeout(o),o=null),l=n,c=e.apply(u,a),o||(u=a=null)):o||!1===i.trailing||(o=setTimeout(f,t)),c}return i=i||{},n.cancel=function(){clearTimeout(o),l=0,o=u=a=null},n},debounce:function(t,e,r){function i(){var n=Wn()-u;n<e?o=setTimeout(i,e-n):(o=null,r||(c=t.apply(l,a)),o||(a=l=null))}var o,u,a,c,l,n=K(function(n){return l=this,a=n,u=Wn(),o||(o=setTimeout(i,e),r&&(c=t.apply(l,a))),c});return n.cancel=function(){clearTimeout(o),o=a=l=null},n},wrap:function(n,t){return nt(t,n)},negate:at,compose:function(){var e=arguments,r=e.length-1;return function(){for(var n=r,t=e[r].apply(this,arguments);n--;)t=e[n].call(this,t);return t}},after:function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}},before:ct,once:t,findKey:lt,findIndex:st,findLastIndex:T,sortedIndex:ht,indexOf:dt,lastIndexOf:C,find:vt,detect:vt,findWhere:function(n,t){return vt(n,Tn(t))},each:gt,forEach:gt,map:mt,collect:mt,reduce:a,foldl:a,inject:a,reduceRight:I,foldr:I,filter:bt,select:bt,reject:function(n,t,e){return bt(n,at(Fn(t)),e)},every:Kt,all:Kt,some:Mt,any:Mt,contains:Ot,includes:Ot,include:Ot,invoke:F,pluck:wt,where:function(n,t){return bt(n,Tn(t))},max:_t,min:function(n,r,t){var e,i,o=1/0,u=1/0;if(null==r||"number"==typeof r&&"object"!=typeof n[0]&&null!=n)for(var a=0,c=(n=et(n)?n:bn(n)).length;a<c;a++)null!=(e=n[a])&&e<o&&(o=e);else r=Fn(r,t),gt(n,function(n,t,e){((i=r(n,t,e))<u||i===1/0&&o===1/0)&&(o=n,u=i)});return o},shuffle:function(n){return jt(n,1/0)},sample:jt,sortBy:function(n,r,t){var i=0;return r=Fn(r,t),wt(mt(n,function(n,t,e){return{value:n,index:i++,criteria:r(n,t,e)}}).sort(function(n,t){var e=n.criteria,r=t.criteria;if(e!==r){if(r<e||void 0===e)return 1;if(e<r||void 0===r)return-1}return n.index-t.index}),"value")},groupBy:l,indexBy:o,countBy:sn,partition:fn,toArray:function(n){return n?R(n)?c.call(n):j(n)?n.match(Et):et(n)?mt(n,Cn):bn(n):[]},size:function(n){return null==n?0:(et(n)?n:nn(n)).length},pick:Pt,omit:hn,first:Nt,head:Nt,take:Nt,initial:St,last:function(n,t,e){return null==n||n.length<1?null==t||e?void 0:[]:null==t||e?n[n.length-1]:Ct(n,Math.max(0,n.length-t))},rest:Ct,tail:Ct,drop:Ct,compact:function(n){return bt(n,Boolean)},flatten:function(n,t){return rt(n,t,!1)},without:B,uniq:Dt,unique:Dt,union:dn,intersection:function(n){for(var t=[],e=arguments.length,r=0,i=Y(n);r<i;r++){var o=n[r];if(!Ot(t,o)){for(var u=1;u<e&&Ot(arguments[u],o);u++);u===e&&t.push(o)}}return t},difference:Tt,unzip:It,transpose:It,zip:Vn,object:function(n,t){for(var e={},r=0,i=Y(n);r<i;r++)t?e[n[r]]=t[r]:e[n[r][0]]=n[r][1];return e},range:function(n,t,e){null==t&&(t=n||0,n=0),e=e||(t<n?-1:1);for(var r=Math.max(Math.ceil((t-n)/e),0),i=Array(r),o=0;o<r;o++,n+=e)i[o]=n;return i},chunk:function(n,t){if(null==t||t<1)return[];for(var e=[],r=0,i=n.length;r<i;)e.push(c.call(n,r,r+=t));return e},mixin:Bt,default:en});return Vn._=Vn}),function(n){"use strict";n.loadAPI(1)}(this),function(n,t){"use strict";var r="f0 00 00 66 14 12 ",i={statusMessage:function(n){n=t.map(n,i.encode);return r+"00 "+n.join("19 ")+"f7"},displlayMessage:function(n,t){for(var e=t?i.encode(t.substr(0,28)):"";e.length<84;)e+="20 ";return r+i.hex(28*Math.min(n,3))+e+"f7"},encode:function(n){var t,e="",r=0;if(n&&n.length)for(;r<n.length;r++)e+=127<(t=n.charCodeAt(r))?"5f ":i.hex(t);return e},hex:function(n){return(n<16?"0"+n.toString(16):n.toString(16))+" "}};n.KompleteKontrol||(n.KompleteKontrol={}),n.KompleteKontrol.utils=i}(this,(host,_)),function(n,r){"use strict";function t(n){this.midiOut=n,this.transport=r.createTransport(),this.elements=[],this.elements.length=10,this.isPlaying=!1,this.ffwOn=!1,this.rwdOn=!1,this.initialize()}n.KompleteKontrol.utils;t.prototype={initialize:function(){var t=this,e=t.midiOut,n=t.transport;this.createElement(86,{on:function(){n.toggleLoop()}}),this.createElement(91,{on:function(){e.sendMidi(144,91,127),t.rewindMomentary(!0)},off:function(){e.sendMidi(144,91,0),t.rewindMomentary(!1)}}),this.createElement(92,{on:function(){e.sendMidi(144,92,127),t.fastForwardMomentary(!0)},off:function(){e.sendMidi(144,92,0),t.fastForwardMomentary(!1)}}),this.createElement(93,{on:function(){n.stop()}}),this.createElement(94,{on:function(){n.play()}}),this.createElement(95,{on:function(){n.record()}}),n.addIsLoopActiveObserver(function(n){e.sendMidi(144,86,n?127:0)}),n.addIsPlayingObserver(function(n){e.sendMidi(144,94,n?127:0),e.sendMidi(144,93,n?0:127),t.isPlaying=n}),n.addIsRecordingObserver(function(n){e.sendMidi(144,95,n?127:0)})},flush:function(){},exit:function(){},onMidi1:function(n,t,e){128===n?this.onMidiNote(t,0):144===n&&this.onMidiNote(t,e)},onMidiNote:function(n,t){n=86<=n&&n<=95?this.elements[n-86]:void 0;n&&(0!==t?n.on&&n.on.call(this):n.off&&n.off.call(this))},createElement:function(n,t){this.elements[n-86]=t},fastForwardMomentary:function(){var n=this,t=this.transport;0<arguments.length&&(this.ffwOn=arguments[0]),this.ffwOn&&(this.considerPlaying(t,t.fastForward),r.scheduleTask(function(){n.fastForwardMomentary()},null,100))},rewindMomentary:function(){var n=this,t=this.transport;0<arguments.length&&(this.rwdOn=arguments[0]),this.rwdOn&&(this.considerPlaying(t,t.rewind),r.scheduleTask(function(){n.rewindMomentary()},null,100))},considerPlaying:function(n,t){var e=this.transport;this.isPlaying?(e.stop(),t.call(n),r.scheduleTask(function(){e.play()},null,50)):t.call(n)}},n.KompleteKontrol||(n.KompleteKontrol={}),n.KompleteKontrol.TransportController=t}(this,host,_),function(e){"use strict";function n(n,t,e){this.midiOut=n,this.track=t,this.device=e,this.status={track:void 0,device:void 0,id:void 0,hasChanged:!1},this.elements=[],this.elements.length=2,this.initialize()}var r=e.KompleteKontrol.utils;n.prototype={initialize:function(){var n=this.track,t=this.device,e=this.status;n.addNameObserver(28,"",function(n){e.track=n,e.hasChanged=!0}),n.addPositionObserver(function(n){e.trackPosition=n,e.hasChanged=!0}),t.addNameObserver(28,"",function(n){e.device=n,e.hasChanged=!0}),t.getCommonParameter(0).addNameObserver(28,"",function(n){var t=e.device;e.id=t&&0===t.lastIndexOf("Komplete Kontrol")&&0===n.lastIndexOf("NIKB")?n.substring("NIKB".length):void 0,e.hasChanged=!0}),this.createElement(20,{on:function(){n.selectPrevious()}}),this.createElement(21,{on:function(){n.selectNext()}})},flush:function(){this.sendStatus()},exit:function(){},onMidi1:function(n,t,e){176===n&&this.onMidiCC(t,e)},onMidiCC:function(n,t){n=20<=n&&n<=21?this.elements[n-20]:void 0;n&&(0!==t?n.on&&n.on.call(this):n.off&&n.off.call(this))},createElement:function(n,t){this.elements[n-20]=t},sendStatus:function(){var n,t=this.status;t.hasChanged&&(n=[],e.println("## flush track:["+t.track+"] position:["+t.trackPosition+"] device:["+t.device+"] id:["+t.id+"]"),n.push(t.track),n.push(t.trackPosition.toString()),t.device&&0<t.device.length&&(n.push(t.device),t.id&&n.push(t.id)),this.midiOut.sendSysex(r.statusMessage(n)),t.hasChanged=!1)}},e.KompleteKontrol||(e.KompleteKontrol={}),e.KompleteKontrol.FocusController=n}(this,(host,_)),function(n,u,a){"use strict";function t(n,t){this.midiOut=n,this.device=t,this.elements=[],this.elements.length=119,this.initialize()}n.KompleteKontrol.utils;t.prototype={initialize:function(){var e=this.elements,r=this.device,n=a.range(14,22),t=a.difference(a.range(1,120),n),i=u.createUserControls(t.length),o=0;a.each(t,function(n){var t=i.getControl(o);t.setLabel("CC"+(1e3+n).toString().substring(1)),e[n-1]=t,o++}),a.each(n,function(n){var t=r.getMacro(n-14).getAmount();t.setIndication(!0),e[n-1]=t})},onMidi0:function(n,t,e){176===n&&this.onMidiCC(t,e)},onMidiCC:function(n,t){var e=this.elements,n=n-1;0<=n&&n<e.length&&e[n].set(t,128)},flush:function(){},exit:function(){}},n.KompleteKontrol||(n.KompleteKontrol={}),n.KompleteKontrol.DeviceController=t}(this,host,_),function(n,u,a,i){"use strict";var c,l=n.NoteExpression;function f(t,e,r){i.each(c,function(n){i.isFunction(n.onMidi0)&&n.onMidi0(t,e,r)})}function s(t,e,r){i.each(c,function(n){i.isFunction(n.onMidi1)&&n.onMidi1(t,e,r)})}u.defineController("Native Instruments","Komplete Kontrol","0.2","6edb3760-4fb6-11e4-916c-0800200c9a66","jhorology jhorology2014@gmail.com"),u.defineMidiPorts(2,2),u.platformIsMac()?(u.addDeviceNameBasedDiscoveryPair(["KOMPLETE KONTROL S61 Port 1","Komplete Kontrol DAW - 1"],["KOMPLETE KONTROL S61 Port 1","Komplete Kontrol DAW - 1"]),u.addDeviceNameBasedDiscoveryPair(["KOMPLETE KONTROL S49 Port 1","Komplete Kontrol DAW - 1"],["KOMPLETE KONTROL S49 Port 1","Komplete Kontrol DAW - 1"]),u.addDeviceNameBasedDiscoveryPair(["KOMPLETE KONTROL S25 Port 1","Komplete Kontrol DAW - 1"],["KOMPLETE KONTROL S25 Port 1","Komplete Kontrol DAW - 1"])):u.platformIsWindows()&&u.addDeviceNameBasedDiscoveryPair(["Komplete Kontrol- 1","Komplete Kontrol DAW-1"],["Komplete Kontrol- 1","Komplete Kontrol DAW-1"]),n.init=function(){var n=u.getMidiInPort(0),t=u.getMidiInPort(1),e=(u.getMidiOutPort(0),u.getMidiOutPort(1)),r=n.createNoteInput("","??????"),i=u.createArrangerCursorTrack(3,0),o=i.createCursorDevice();n.setMidiCallback(f),t.setMidiCallback(s),r.setShouldConsumeEvents(!1),r.assignPolyphonicAftertouchToExpression(0,l.TIMBRE_UP,2),c=[new a.TransportController(e),new a.FocusController(e,i,o),new a.DeviceController(e,o)]},n.flush=function(){i.each(c,function(n){i.isFunction(n.flush)&&n.flush()})},n.exit=function(){i.each(c.reverse(),function(n){i.isFunction(n.exit)&&n.exit()}),c=void 0}}(this,host,this.KompleteKontrol,_);