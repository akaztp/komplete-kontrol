!function(a){"use strict";a.loadAPI(1)}(this),function(a,b){"use strict";var c=86,d=86,e=91,f=92,g=93,h=94,i=95,j=95,k=function(a){this.midiOut=a,this.transport=b.createTransport(),this.elements=[],this.isPlaying=!1,this.ffwOn=!1,this.rwdOn=!1,this.initialize()};k.prototype={initialize:function(){var b=this,c=b.midiOut,j=b.transport;this.createElement(d,{on:function(){j.toggleLoop()}}),this.createElement(e,{on:function(){c.sendMidi(144,e,127),b.rewindMomentary(!0)},off:function(){c.sendMidi(144,e,0),b.rewindMomentary(!1)}}),this.createElement(f,{on:function(){c.sendMidi(144,f,127),b.fastForwardMomentary(!0)},off:function(){c.sendMidi(144,f,0),b.fastForwardMomentary(!1)}}),this.createElement(g,{on:function(){j.stop()}}),this.createElement(h,{on:function(){a.println("## play transport:"+j),j.play()}}),this.createElement(i,{on:function(){j.record()}}),j.addIsLoopActiveObserver(function(a){c.sendMidi(144,d,a?127:0)}),j.addIsPlayingObserver(function(a){c.sendMidi(144,h,a?127:0),c.sendMidi(144,g,a?0:127),b.isPlaying=a}),j.addIsRecordingObserver(function(a){c.sendMidi(144,i,a?127:0)})},onMidi:function(a,b,c){128===a?this.onMidiNote(b,0):144===a&&this.onMidiNote(b,c)},onMidiNote:function(a,b){var d=a>=c&&j>=a?this.elements[a-c]:void 0,e=0!==b;d&&(e?d.on&&d.on():d.off&&d.off())},flush:function(){},exit:function(){},createElement:function(a,b){this.elements[a-c]=b},fastForwardMomentary:function(){if(arguments.length>0&&(this.ffwOn=arguments[0]),this.ffwOn){this.considerPlaying(this.transport,this.transport.fastForward);var a=this;b.scheduleTask(function(){a.fastForwardMomentary()},null,100)}},rewindMomentary:function(){if(arguments.length>0&&(this.rwdOn=arguments[0]),this.rwdOn){this.considerPlaying(this.transport,this.transport.rewind);var a=this;b.scheduleTask(function(){a.rewindMomentary()},null,100)}},considerPlaying:function(a,c){if(this.isPlaying){this.transport.stop(),c.call(a);var d=this;b.scheduleTask(function(){d.transport.play()},null,50)}else c.call(a)}},a.controller||(a.controller={}),a.controller.TransportController=k}(this,host),function(a){"use strict";function b(a){var b,c="";if(a)for(var d=0;d<a.length;d++)b=a.charCodeAt(d),b>127&&(b=95),c+=b>15?b.toString(16):"0"+b.toString(16),c+=" ";return c}var c=28,d=20,e=20,f=21,g=21,h="f0 00 00 66 14 12 ",i="19 ",j="f7",k=function(a,b,c){this.midiOut=a,this.track=b,this.device=c,this.status={},this.elements=[],this.initialize()};k.prototype={initialize:function(){var a=this.track,b=this.device,d=this.status;a.addNameObserver(c,"",function(a){d.track=a,d.hasChanged=!0}),a.addPositionObserver(function(a){d.trackPosition=a,d.hasChanged=!0}),b.addNameObserver(c,"",function(a){d.device=a,d.hasChanged=!0}),this.createElement(e,{on:function(){a.selectPrevious()}}),this.createElement(f,{on:function(){a.selectNext()}})},onMidi:function(a,b,c){176===a&&this.onMidiCC(b,c)},onMidiCC:function(a,b){var c=a>=d&&g>=a?this.elements[a-d]:void 0,e=0!==b;c&&(e?c.on&&c.on.call(this):c.off&&c.off.call(this))},flush:function(){var b=this.status;b.hasChanged&&(a.println("## flush track:["+b.track+"] position["+b.trackPosition+"] device["+b.device+"]"),this.midiOut.sendSysex(this.createStatuExMsg()),b.hasChanged=!1)},exit:function(){},createElement:function(a,b){this.elements[a-d]=b},createStatuExMsg:function(){var c=h+"00 ",d=this.status;if(c+=b(d.track),c+=i,c+=b(d.trackPosition.toString()),d.device&&d.device.length>0){c+=i,c+=b(d.device),c+=i;var e=(101+d.trackPosition).toString().substring(1);c+=b(e)}return c+=j,a.println("## ex:["+c+"]"),c}},a.controller||(a.controller={}),a.controller.FocusController=k}(this,host),function(a,b){"use strict";function c(a){return a>m?a-j-8:a-j}function d(a,b,d){176===(240&a)&&(b>=l&&m>=b?f.getMacro(b-l).getAmount().set(d,128):b>=j&&k>=b&&g.getControl(c(b)).set(d,128))}function e(a,b,c){h.onMidi(a,b,c),i.onMidi(a,b,c)}var f,g,h,i,j=1,k=119,l=14,m=21;b.defineController("Native Instruments","Komplete Kontrol","0.1","6edb3760-4fb6-11e4-916c-0800200c9a66","jhorology jhorology2014@gmail.com"),b.defineMidiPorts(2,2),b.addDeviceNameBasedDiscoveryPair(["KOMPLETE KONTROL S61 Port 1","Komplete Kontrol DAW - 1"],["KOMPLETE KONTROL S61 Port 1","Komplete Kontrol DAW - 1"]),b.addDeviceNameBasedDiscoveryPair(["KOMPLETE KONTROL S49 Port 1","Komplete Kontrol DAW - 1"],["KOMPLETE KONTROL S49 Port 1","Komplete Kontrol DAW - 1"]),b.addDeviceNameBasedDiscoveryPair(["KOMPLETE KONTROL S25 Port 1","Komplete Kontrol DAW - 1"],["KOMPLETE KONTROL S25 Port 1","Komplete Kontrol DAW - 1"]),a.init=function(){var n;b.getMidiInPort(0).setMidiCallback(d),b.getMidiInPort(1).setMidiCallback(e),b.getMidiInPort(0).createNoteInput("","??????").setShouldConsumeEvents(!1);var o=b.createArrangerCursorTrack(3,0);for(f=o.getPrimaryInstrument(),n=0;8>n;n++){var p=f.getMacro(n).getAmount();p.setIndication(!0)}for(g=b.createUserControlsSection(k-j+1-8),n=j;k>n;n++)(l>n||n>m)&&g.getControl(c(n)).setLabel("CC"+n);var q=b.getMidiOutPort(1);h=new a.controller.TransportController(q),i=new a.controller.FocusController(q,o,f)},a.flush=function(){h.flush(),i.flush()},a.exit=function(){h.exit(),i.exit()}}(this,host);